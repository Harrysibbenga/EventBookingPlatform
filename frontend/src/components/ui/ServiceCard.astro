---
/**
 * Service card component for displaying individual services.
 * Features hover animations, pricing display, and call-to-action.
 */

 export interface Props {
  service: {
    id: string
    name: string
    description: string
    icon: string
    basePrice?: number
    priceUnit?: string
    category: string
    popular?: boolean
    features: string[]
  }
  index?: number
  class?: string
  style?: string
}

const { service, index = 0, class: className = '', style = '' } = Astro.props
const { name, description, icon, basePrice, priceUnit, popular, features } = service

// Format price display
const priceDisplay = basePrice 
  ? priceUnit 
    ? `$${basePrice}${priceUnit}`
    : `Starting at $${basePrice}`
  : 'Custom Quote'
---

<div 
  class={`group relative bg-white rounded-xl shadow-soft hover:shadow-medium transition-all duration-300 hover:-translate-y-2 border border-neutral-100 overflow-hidden ${className}`}
  style={style}
>
  <!-- Popular Badge -->
  {popular && (
    <div class="absolute top-4 right-4 bg-primary-600 text-white px-3 py-1 rounded-full text-xs font-medium z-10">
      Popular
    </div>
  )}

  <!-- Card Header -->
  <div class="p-6 pb-4">
    <!-- Icon -->
    <div class="w-12 h-12 bg-gradient-to-br from-primary-100 to-primary-200 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300">
      <span class="text-2xl" set:html={icon}></span>
    </div>

    <!-- Title & Description -->
    <h3 class="text-xl font-semibold text-neutral-900 mb-2 group-hover:text-primary-600 transition-colors">
      {name}
    </h3>
    
    <p class="text-neutral-600 text-sm leading-relaxed mb-4">
      {description}
    </p>

    <!-- Price -->
    <div class="flex items-center justify-between mb-4">
      <span class="text-lg font-bold text-primary-600">
        {priceDisplay}
      </span>
      {popular && (
        <div class="flex items-center text-primary-600 text-sm">
          <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          Most Popular
        </div>
      )}
    </div>
  </div>

  <!-- Features List -->
  <div class="px-6 pb-6">
    <div class="border-t border-neutral-100 pt-4">
      <h4 class="text-sm font-medium text-neutral-700 mb-3">What's Included:</h4>
      <ul class="space-y-2">
        {features.slice(0, 4).map((feature) => (
          <li class="flex items-start text-sm text-neutral-600">
            <svg class="w-4 h-4 text-primary-500 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            {feature}
          </li>
        ))}
        {features.length > 4 && (
          <li class="text-sm text-primary-600 font-medium">
            + {features.length - 4} more features
          </li>
        )}
      </ul>
    </div>
  </div>

  <!-- Card Footer -->
  <div class="px-6 pb-6">
    <div class="flex flex-col sm:flex-row gap-3">
      <a 
        href="/booking"
        class="flex-1 bg-primary-600 hover:bg-primary-700 text-white text-center px-4 py-2.5 rounded-lg font-medium transition-all duration-200 hover:shadow-lg text-sm"
      >
        Book Now
      </a>
      <a 
        href="/contact"
        class="flex-1 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 text-center px-4 py-2.5 rounded-lg font-medium transition-colors text-sm"
      >
        Learn More
      </a>
    </div>
  </div>

  <!-- Hover Effect Overlay -->
  <div class="absolute inset-0 bg-gradient-to-t from-primary-50/0 to-primary-50/0 group-hover:from-primary-50/5 group-hover:to-transparent transition-all duration-300 pointer-events-none rounded-xl"></div>
</div>

<style>
  /* Card hover animations */
  .group:hover .service-icon {
    transform: scale(1.1) rotate(5deg);
  }
  
  /* Stagger animation delay */
  .service-card {
    animation-delay: calc(var(--index, 0) * 100ms);
  }
  
  /* Popular badge pulse animation */
  .popular-badge {
    animation: pulse-soft 2s infinite;
  }
  
  @keyframes pulse-soft {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.8;
    }
  }
  
  /* Focus states for accessibility */
  .group:focus-within {
    outline: 2px solid theme('colors.primary.500');
    outline-offset: 2px;
  }
  
  /* Button hover effects */
  .btn-primary:hover {
    transform: translateY(-1px);
  }
  
  .btn-secondary:hover {
    transform: translateY(-1px);
  }
</style>